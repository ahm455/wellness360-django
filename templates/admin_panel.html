
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background-color: #121212;
            color: #f8f9fa;
            min-height: 100vh;
        }
        
        .card {
            background-color: #1e1e1e;
            border: 1px solid #2d2d2d;
        }
        
        .table-dark {
            --bs-table-bg: #1e1e1e;
            --bs-table-striped-bg: #252525;
            --bs-table-hover-bg: #2d2d2d;
        }
        
        .table-light {
            --bs-table-bg: #495057;
            color: #fff;
        }
        
        .btn-outline-primary {
            border-color: #0d6efd;
            color: #0d6efd;
        }
        
        .btn-outline-primary:hover {
            background-color: #0d6efd;
            color: #fff;
        }
        
        .border-secondary {
            border-color: #6c757d !important;
        }
        
        .modal-content {
            background-color: #1e1e1e;
        }
        
        .btn-close-white {
            filter: invert(1) grayscale(100%) brightness(200%);
        }
        
        .form-control, .form-select {
            background-color: #121212;
            border-color: #495057;
            color: #f8f9fa;
        }
        
        .form-control:focus, .form-select:focus {
            background-color: #121212;
            border-color: #6c757d;
            color: #f8f9fa;
            box-shadow: 0 0 0 0.25rem rgba(108, 117, 125, 0.25);
        }
        
        .shadow {
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.5) !important;
        }
        
        .shadow-lg {
            box-shadow: 0 1rem 3rem rgba(0, 0, 0, 0.5) !important;
        }
        
        .alert {
            border: none;
        }
        
        .alert-success {
            background-color: rgba(25, 135, 84, 0.2);
            color: #75b798;
        }
        
        .alert-danger {
            background-color: rgba(220, 53, 69, 0.2);
            color: #ea868f;
        }
        
        .alert-warning {
            background-color: rgba(255, 193, 7, 0.2);
            color: #ffda6a;
        }
        
        .alert-info {
            background-color: rgba(13, 110, 253, 0.2);
            color: #6ea8fe;
        }
        
        .bg-gradient {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        }
        
        .btn-group-sm .btn {
            padding: 0.25rem 0.5rem;
            font-size: 0.875rem;
        }
        
        .badge {
            font-weight: 500;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <div class="card bg-dark text-light p-4 shadow-lg">
            <h1 class="text-center mb-4">
                <i class="fas fa-users-cog"></i> Admin Panel
            </h1>

            <!-- Display Messages -->
            <div id="message-container">
                <!-- Messages will be displayed here -->
            </div>

            <!-- Admin Stats -->
            <div class="row text-center mb-4">
                <div class="col-md-2 col-6 mb-3">
                    <div class="card bg-secondary text-light shadow h-100">
                        <div class="card-body d-flex flex-column justify-content-center">
                            <h5 class="card-title">Users</h5>
                            <h3 class="mb-0" id="user-count">0</h3>
                        </div>
                    </div>
                </div>
                <div class="col-md-2 col-6 mb-3">
                    <div class="card bg-primary text-light shadow h-100">
                        <div class="card-body d-flex flex-column justify-content-center">
                            <h5 class="card-title">Goals</h5>
                            <h3 class="mb-0" id="goal-count">0</h3>
                        </div>
                    </div>
                </div>
                <div class="col-md-2 col-6 mb-3">
                    <div class="card bg-warning text-dark shadow h-100">
                        <div class="card-body d-flex flex-column justify-content-center">
                            <h5 class="card-title">Reminders</h5>
                            <h3 class="mb-0" id="reminder-count">0</h3>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-6 mb-3">
                    <div class="card bg-success text-light shadow h-100">
                        <div class="card-body d-flex flex-column justify-content-center">
                            <h5 class="card-title">Medical Records</h5>
                            <h3 class="mb-0" id="record-count">0</h3>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-6 mb-3">
                    <div class="card bg-danger text-light shadow h-100">
                        <div class="card-body d-flex flex-column justify-content-center">
                            <h5 class="card-title">Activities</h5>
                            <h3 class="mb-0" id="activity-count">0</h3>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Add User Button -->
            <div class="text-end mb-3">
                <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addUserModal">
                    <i class="fas fa-user-plus"></i> Add User
                </button>
            </div>

            <!-- Users Table -->
            <div class="table-responsive">
                <table class="table table-dark table-striped table-bordered align-middle">
                    <thead class="table-light text-dark">
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="users-table-body">
                        <!-- Users will be loaded here -->
                        <tr id="no-users-row">
                            <td colspan="6" class="text-center text-muted py-4">
                                <i class="fas fa-users-slash fa-2x mb-3"></i><br>
                                No users found
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Pagination -->
            <nav aria-label="User pagination" class="mt-3" id="pagination-container" style="display: none;">
                <ul class="pagination justify-content-center">
                    <li class="page-item disabled" id="prev-page">
                        <a class="page-link bg-dark text-light border-secondary" href="#" tabindex="-1">Previous</a>
                    </li>
                    <li class="page-item active">
                        <a class="page-link bg-secondary border-secondary" href="#">1</a>
                    </li>
                    <li class="page-item" id="next-page">
                        <a class="page-link bg-dark text-light border-secondary" href="#">Next</a>
                    </li>
                </ul>
            </nav>

            <!-- Admin Tools -->
            <div class="mt-4 text-center">
                <button class="btn btn-outline-light me-2" id="view-logs-btn">
                    <i class="fas fa-clipboard-list"></i> View Activity Logs
                </button>
                <button class="btn btn-outline-info" id="system-settings-btn">
                    <i class="fas fa-cogs"></i> System Settings
                </button>
                <a href="/dashboard/" class="btn btn-outline-light me-2">
    <i class="fas fa-tachometer-alt"></i> Dashboard
</a>
            </div>
        </div>
    </div>

    <!-- Add User Modal -->
    <div class="modal fade" id="addUserModal" tabindex="-1" aria-labelledby="addUserModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <form id="add-user-form">
                <div class="modal-content bg-dark text-light">
                    <div class="modal-header border-secondary">
                        <h5 class="modal-title" id="addUserModalLabel">Add New User</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3">
                            <label class="form-label">Name</label>
                            <input type="text" name="name" class="form-control bg-dark text-light border-secondary" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" name="email" class="form-control bg-dark text-light border-secondary" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <input type="password" name="password" class="form-control bg-dark text-light border-secondary" required>
                            <div class="form-text text-muted">Password must be at least 8 characters long</div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Role</label>
                            <select name="role" class="form-select bg-dark text-light border-secondary">
                                <option value="User">User</option>
                                <option value="Admin">Admin</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer border-secondary">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-outline-primary">Add User</button>
    
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit User Modal -->
    <div class="modal fade" id="editUserModal" tabindex="-1" aria-labelledby="editUserModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <form id="edit-user-form">
                <div class="modal-content bg-dark text-light">
                    <div class="modal-header border-secondary">
                        <h5 class="modal-title" id="editUserModalLabel">Edit User</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <input type="hidden" name="user_id" id="edit-user-id">
                        <div class="mb-3">
                            <label class="form-label">Name</label>
                            <input type="text" name="name" id="edit-user-name" class="form-control bg-dark text-light border-secondary" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" name="email" id="edit-user-email" class="form-control bg-dark text-light border-secondary" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Role</label>
                            <select name="role" id="edit-user-role" class="form-select bg-dark text-light border-secondary">
                                <option value="User">User</option>
                                <option value="Admin">Admin</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Status</label>
                            <select name="status" id="edit-user-status" class="form-select bg-dark text-light border-secondary">
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                                <option value="suspended">Suspended</option>
                            </select>
                        </div>
                    </div>
                    <div class="modal-footer border-secondary">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-outline-primary">Save Changes</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Mock data for demonstration
        const mockUsers = [
            { id: 1, name: "John Doe", email: "john@example.com", role: "Admin", status: "active" },
            { id: 2, name: "Jane Smith", email: "jane@example.com", role: "User", status: "active" },
            { id: 3, name: "Bob Johnson", email: "bob@example.com", role: "User", status: "inactive" },
            { id: 4, name: "Alice Brown", email: "alice@example.com", role: "Admin", status: "active" },
            { id: 5, name: "Charlie Wilson", email: "charlie@example.com", role: "User", status: "suspended" }
        ];

        // Initialize stats
        document.getElementById('user-count').textContent = '25';
        document.getElementById('goal-count').textContent = '142';
        document.getElementById('reminder-count').textContent = '89';
        document.getElementById('record-count').textContent = '67';
        document.getElementById('activity-count').textContent = '312';

        // Function to show message
        function showMessage(type, text) {
            const messageContainer = document.getElementById('message-container');
            const alertClass = type === 'success' ? 'alert-success' : 
                              type === 'error' ? 'alert-danger' : 
                              type === 'warning' ? 'alert-warning' : 'alert-info';
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `alert ${alertClass} text-center alert-dismissible fade show`;
            messageDiv.innerHTML = `
                ${text}
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert"></button>
            `;
            
            messageContainer.appendChild(messageDiv);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.remove();
                }
            }, 5000);
        }

        // Function to render users table
        function renderUsersTable(users) {
            const tbody = document.getElementById('users-table-body');
            const noUsersRow = document.getElementById('no-users-row');
            
            if (users.length === 0) {
                noUsersRow.style.display = '';
                return;
            }
            
            noUsersRow.style.display = 'none';
            tbody.innerHTML = '';
            
            users.forEach(user => {
                const row = document.createElement('tr');
                
                // Determine status badge color
                let statusBadgeClass = 'bg-success';
                if (user.status === 'inactive') statusBadgeClass = 'bg-secondary';
                if (user.status === 'suspended') statusBadgeClass = 'bg-danger';
                
                row.innerHTML = `
                    <td>${user.id}</td>
                    <td>${user.name}</td>
                    <td>${user.email}</td>
                    <td>
                        <span class="badge ${user.role === 'Admin' ? 'bg-danger' : 'bg-primary'}">
                            ${user.role}
                        </span>
                    </td>
                    <td>
                        <span class="badge ${statusBadgeClass}">
                            ${user.status.charAt(0).toUpperCase() + user.status.slice(1)}
                        </span>
                    </td>
                    <td>
                        <div class="btn-group btn-group-sm" role="group">
                            <button class="btn btn-outline-info edit-user-btn" data-user-id="${user.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            ${user.role !== 'Admin' ? 
                                `<button class="btn btn-outline-success make-admin-btn" data-user-id="${user.id}">
                                    <i class="fas fa-user-shield"></i>
                                </button>` : 
                                `<button class="btn btn-outline-warning remove-admin-btn" data-user-id="${user.id}">
                                    <i class="fas fa-user-minus"></i>
                                </button>`
                            }
                            <button class="btn btn-outline-danger delete-user-btn" data-user-id="${user.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
            
            // Add event listeners to buttons
            document.querySelectorAll('.edit-user-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const userId = e.currentTarget.dataset.userId;
                    editUser(userId);
                });
            });
            
            document.querySelectorAll('.make-admin-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const userId = e.currentTarget.dataset.userId;
                    makeAdmin(userId);
                });
            });
            
            document.querySelectorAll('.remove-admin-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const userId = e.currentTarget.dataset.userId;
                    removeAdmin(userId);
                });
            });
            
            document.querySelectorAll('.delete-user-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const userId = e.currentTarget.dataset.userId;
                    deleteUser(userId);
                });
            });
        }

        // Function to edit user
        function editUser(userId) {
            const user = mockUsers.find(u => u.id == userId);
            if (user) {
                document.getElementById('edit-user-id').value = user.id;
                document.getElementById('edit-user-name').value = user.name;
                document.getElementById('edit-user-email').value = user.email;
                document.getElementById('edit-user-role').value = user.role;
                document.getElementById('edit-user-status').value = user.status;
                
                const editModal = new bootstrap.Modal(document.getElementById('editUserModal'));
                editModal.show();
            }
        }

        // Function to make user admin
        function makeAdmin(userId) {
            if (confirm('Are you sure you want to make this user an admin?')) {
                showMessage('success', `User #${userId} has been made an admin.`);
                // In a real app, you would make an API call here
            }
        }

        // Function to remove admin
        function removeAdmin(userId) {
            if (confirm('Are you sure you want to remove admin privileges from this user?')) {
                showMessage('warning', `Admin privileges removed from user #${userId}.`);
                // In a real app, you would make an API call here
            }
        }

        // Function to delete user
        function deleteUser(userId) {
            if (confirm('Are you sure you want to delete this user? This action cannot be undone.')) {
                showMessage('success', `User #${userId} has been deleted.`);
                // In a real app, you would make an API call here
            }
        }

        // Add User Form Submission
        document.getElementById('add-user-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const name = formData.get('name');
            const email = formData.get('email');
            const role = formData.get('role');
            
            // Validate password
            const password = formData.get('password');
            if (password.length < 8) {
                showMessage('error', 'Password must be at least 8 characters long.');
                return;
            }
            
            // In a real app, you would make an API call here
            showMessage('success', `User "${name}" has been added successfully.`);
            
            // Close modal
            const addModal = bootstrap.Modal.getInstance(document.getElementById('addUserModal'));
            addModal.hide();
            
            // Reset form
            this.reset();
            
            // Add to mock data (for demo)
            const newId = mockUsers.length + 1;
            mockUsers.push({
                id: newId,
                name: name,
                email: email,
                role: role,
                status: 'active'
            });
            
            // Update table
            renderUsersTable(mockUsers);
            
            // Update user count
            const userCount = parseInt(document.getElementById('user-count').textContent) + 1;
            document.getElementById('user-count').textContent = userCount;
        });

        // Edit User Form Submission
        document.getElementById('edit-user-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const userId = formData.get('user_id');
            const name = formData.get('name');
            const email = formData.get('email');
            const role = formData.get('role');
            const status = formData.get('status');
            
            // In a real app, you would make an API call here
            showMessage('success', `User "${name}" has been updated successfully.`);
            
            // Close modal
            const editModal = bootstrap.Modal.getInstance(document.getElementById('editUserModal'));
            editModal.hide();
            
            // Update mock data (for demo)
            const userIndex = mockUsers.findIndex(u => u.id == userId);
            if (userIndex !== -1) {
                mockUsers[userIndex] = {
                    ...mockUsers[userIndex],
                    name: name,
                    email: email,
                    role: role,
                    status: status
                };
                
                // Update table
                renderUsersTable(mockUsers);
            }
        });

        // View Logs Button
        document.getElementById('view-logs-btn').addEventListener('click', function() {
            showMessage('info', 'Redirecting to activity logs...');
            // In a real app, you would navigate to logs page
        });

        // System Settings Button
        document.getElementById('system-settings-btn').addEventListener('click', function() {
            showMessage('info', 'Redirecting to system settings...');
            // In a real app, you would navigate to settings page
        });

        // Initialize table with mock data
        renderUsersTable(mockUsers);

        // Show initial message
        setTimeout(() => {
            showMessage('info', 'Welcome to the Admin Panel. Manage users and system settings here.');
        }, 1000);
    </script>
</body>
</html>