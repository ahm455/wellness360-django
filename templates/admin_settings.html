{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-5">
    <div class="card bg-dark text-light p-4 shadow-lg">
        <h2 class="text-center mb-4">
            <i class="fas fa-cogs"></i> System Settings
        </h2>

        <!-- Django Messages -->
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} text-center">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}

        <!-- Settings Form -->
        <form method="POST" action="{% url 'system_settings' %}">
            {% csrf_token %}
            
            <div class="mb-3">
                <label for="site_name" class="form-label">Site Name</label>
                <input type="text" 
                       class="form-control bg-dark text-light border-secondary" 
                       id="site_name" 
                       name="site_name" 
                       value="{{ site_name|default:'Wellness360' }}" 
                       required>
            </div>
            
            <div class="mb-3">
                <label for="support_email" class="form-label">Support Email</label>
                <input type="email" 
                       class="form-control bg-dark text-light border-secondary" 
                       id="support_email" 
                       name="support_email" 
                       value="{{ support_email|default:'support@example.com' }}" 
                       required>
            </div>
            
            <div class="mb-3">
                <label for="items_per_page" class="form-label">Items Per Page</label>
                <input type="number" 
                       class="form-control bg-dark text-light border-secondary" 
                       id="items_per_page" 
                       name="items_per_page" 
                       value="{{ items_per_page|default:'10' }}" 
                       min="5" 
                       max="100" 
                       required>
            </div>
            
            <div class="mb-3">
                <label for="maintenance_mode" class="form-label">Maintenance Mode</label>
                <select class="form-select bg-dark text-light border-secondary" 
                        id="maintenance_mode" 
                        name="maintenance_mode">
                    <option value="false" {% if not maintenance_mode %}selected{% endif %}>Disabled</option>
                    <option value="true" {% if maintenance_mode %}selected{% endif %}>Enabled</option>
                </select>
            </div>
            
            <div class="mb-3">
                <label for="timezone" class="form-label">Timezone</label>
                <select class="form-select bg-dark text-light border-secondary" 
                        id="timezone" 
                        name="timezone">
                    <option value="UTC" {% if timezone == 'UTC' %}selected{% endif %}>UTC</option>
                    <option value="America/New_York" {% if timezone == 'America/New_York' %}selected{% endif %}>Eastern Time</option>
                    <option value="America/Chicago" {% if timezone == 'America/Chicago' %}selected{% endif %}>Central Time</option>
                    <option value="America/Denver" {% if timezone == 'America/Denver' %}selected{% endif %}>Mountain Time</option>
                    <option value="America/Los_Angeles" {% if timezone == 'America/Los_Angeles' %}selected{% endif %}>Pacific Time</option>
                </select>
            </div>
            
            <button type="submit" class="btn btn-success w-100">
                <i class="fas fa-save me-2"></i> Save Settings
            </button>
        </form>
        
        <!-- Additional Settings Sections -->
        <div class="mt-4">
            <h4 class="border-bottom pb-2">Advanced Settings</h4>
            
            <div class="row mt-3">
                <div class="col-md-6">
                    <div class="card bg-secondary text-light mb-3">
                        <div class="card-body">
                            <h5 class="card-title">
                                <i class="fas fa-database me-2"></i>Database
                            </h5>
                            <p class="card-text">Manage database backup and recovery</p>
                            <a href="{% url 'database_settings' %}" class="btn btn-outline-light btn-sm">
                                Configure
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card bg-secondary text-light mb-3">
                        <div class="card-body">
                            <h5 class="card-title">
                                <i class="fas fa-envelope me-2"></i>Email
                            </h5>
                            <p class="card-text">Configure email server settings</p>
                            <a href="{% url 'email_settings' %}" class="btn btn-outline-light btn-sm">
                                Configure
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6">
                    <div class="card bg-secondary text-light mb-3">
                        <div class="card-body">
                            <h5 class="card-title">
                                <i class="fas fa-shield-alt me-2"></i>Security
                            </h5>
                            <p class="card-text">Security and privacy settings</p>
                            <a href="{% url 'security_settings' %}" class="btn btn-outline-light btn-sm">
                                Configure
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card bg-secondary text-light mb-3">
                        <div class="card-body">
                            <h5 class="card-title">
                                <i class="fas fa-chart-line me-2"></i>Analytics
                            </h5>
                            <p class="card-text">Analytics and reporting settings</p>
                            <a href="{% url 'analytics_settings' %}" class="btn btn-outline-light btn-sm">
                                Configure
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Danger Zone -->
        <div class="mt-4 border-top border-danger pt-4">
            <h4 class="text-danger">
                <i class="fas fa-exclamation-triangle me-2"></i>Danger Zone
            </h4>
            <div class="alert alert-danger">
                <h5>Warning: Irreversible Actions</h5>
                <p>These actions cannot be undone. Proceed with caution.</p>
                <div class="mt-3">
                    <a href="{% url 'clear_cache' %}" class="btn btn-outline-danger me-2">
                        <i class="fas fa-trash me-1"></i> Clear Cache
                    </a>
                    <a href="{% url 'reset_system' %}" class="btn btn-outline-danger me-2" 
                       onclick="return confirm('Are you sure you want to reset system settings? This will revert all settings to default values.');">
                        <i class="fas fa-redo me-1"></i> Reset to Defaults
                    </a>
                    <a href="{% url 'system_logs' %}" class="btn btn-outline-warning">
                        <i class="fas fa-file-alt me-1"></i> View System Logs
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
    .form-control:focus, .form-select:focus {
        border-color: #6c757d;
        box-shadow: 0 0 0 0.25rem rgba(108, 117, 125, 0.25);
    }
    
    .card {
        transition: transform 0.2s;
    }
    
    .card:hover {
        transform: translateY(-2px);
    }
    
    .border-secondary {
        border-color: #6c757d !important;
    }
</style>
{% endblock %}